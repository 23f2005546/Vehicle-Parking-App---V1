{% extends 'base.html' %}
{% block content %}
  <h2>Your Reservations</h2>

  {% if reservations %}
    {% for res, cost in reservations %}
      <div class="card mb-3">
        <div class="card-body">
          <p><strong>Lot:</strong> {{ res.spot.lot.prime_location_name }}</p>
          <p><strong>Spot:</strong> #{{ res.spot.spot_number }}</p>
          <p><strong>Start:</strong> {{ res.parking_time.strftime('%Y-%m-%d %H:%M') }}</p>
          {% if res.leaving_time %}
            <p><strong>Left At:</strong> {{ res.leaving_time.strftime('%Y-%m-%d %H:%M') }}</p>
            <p><strong>Total Cost:</strong> â‚¹{{ cost }}</p>
          {% else %}
            <form method="POST" action="{{ url_for('user.leave_parking') }}">
              <input type="hidden" name="reservation_id" value="{{ res.id }}">
              <button type="submit" class="btn btn-warning btn-sm">Leave Parking</button>
            </form>
            <form method="POST" action="{{ url_for('user.cancel_reservation') }}">
              <input type="hidden" name="reservation_id" value="{{ res.id }}">
              <button type="submit" class="btn btn-danger btn-sm">Cancel Reservation</button>
            </form>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  {% else %}
    <p>No reservations yet.</p>
  {% endif %}

{% endblock %}
